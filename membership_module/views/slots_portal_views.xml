<odoo>
    <template id="portal_view" name="My Slots" customize_show="True"
              inherit_id="portal.portal_my_home" priority="90">
        <xpath expr="//div[hasclass('o_portal_docs')]" position="inside">
            <a href="/my/slots"
               class="list-group-item list-group-item-action d-flex align-items-center justify-content-between"
               title="My Slots">
                My Slots
               <span class="badge text-bg-secondary rounded-pill"
                      data-oe-model="ir.ui.view" data-oe-id="405"
                      data-oe-field="arch"
                      data-oe-xpath="/t[1]/a[1]/t[3]/span[1]"
                      data-placeholder_count="slots_count">
                </span>
            </a>
        </xpath>
    </template>


    <template id="portal_breadcrumbs" inherit_id="portal.portal_breadcrumbs">
        <xpath expr="//ol[hasclass('o_portal_submenu')]" position="inside">
            <li t-if="page_name == 'my_slot_view'" class="breadcrumb-item">Myslots</li>
            <li t-if="page_name == 'my_slot_details_view'" class="breadcrumb-item"><a href ='/slot/detail'>slot details</a></li>
        </xpath>     
    </template>



    <template id="portal_slots_template" name="Slots Detail">
        <t t-call="portal.portal_layout">
            <t t-call="portal.portal_table">
                    <thead>
                        <tr class="active">
                            <!-- <th class="text-center">Slot Id</th> -->
                            <th class="text-center">Slot</th>
                            <th class="text-center">Delivery Date</th>
                        </tr>
                    </thead>
                    <tbody>
                        <t t-if="slots">
                            <t t-foreach="slots" t-as="slot">
                                    <tr>
                                        <!-- <td class="text-center"><t t-esc="slot['slot_id']"/></a></td> -->
                                        <td class="text-center"><a t-attf-href="/slot/detail/{{ slot['slot_id'] }}/{{ slot['unique_slot_id'] }}"><t t-esc="slot['slot_name']"/></a></td>
                                        <td class="text-center"><t t-esc="slot['slot_date']"/></td>
                                        <input type="hidden" t-att-value="slot['unique_slot_id']"/>
                                        <td style="display:none;"><span id="partner-id">Partner ID: <t t-esc="slot['partner_id']"/></span></td>

                                    </tr>
                            </t>
                        </t>
                        <t t-else="">
                            <tr>
                                <td colspan="3">No slots available.</td>
                            </tr>
                        </t>
                    </tbody>
            </t> 
        </t>      
    </template>


    <template id="slot_detail_template" name="Slot Form">
        <t t-call="portal.portal_layout">
            <t t-call="portal.portal_table">
                <form>
                    <div class="o_portal_block" t-att-id="unique_slot_id" >
                        <div class="o_portal_block_header">
                            <h2>Slot Details</h2>
                        </div>
                        <div class="o_portal_block_content">
                            <div>
                                <p id="partner-id" >Partner ID: <t t-esc="partner_id"/></p>
                                <p>Slot ID: <t t-esc="slot.id"/></p>
                                <p>Slot Name: <t t-esc="slot.slot_name"/></p>
                                <p>Slot Date: <t t-esc="slot_date"/></p>
                                <h2>Products:</h2>
                                <table class="table" id="slot_detail_templates">
                                    <thead>
                                        <tr>
                                            <th>Product</th>
                                            <th>Quantity</th>
                                            <th>UOM</th>
                                            <th>Unit Price</th>
                                            <th>Subtotal</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <t t-foreach="product_lines" t-as="line">
                                            <tr t-att-data-line-id="line.id" t-att-data-product-id="line.product_id.id">
                                                <td>
                                                    <img t-if="line.product_id.sudo().image_128" t-att-src="'data:image/png;base64,' + line.product_id.sudo().image_128.decode('utf-8')" style="max-width: 50px; max-height: 50px; background-color: transparent;" />
                                                    <span t-if="not line.product_id.sudo().image_128"></span>
                                                    <t t-esc="line.product_id.display_name"/>
                                                </td>
                                                <td class="quantity-cell">
                                                    <span class="editable-quantity" t-att-data-value="line.quantity"><t t-esc="line.quantity"/></span>
                                                    <input type="number" class="edit-quantity" style="display:none;" t-att-value="line.quantity"/> 
                                                </td>
                                                <td><span class="uom"><t t-esc="line.uom_name"/></span></td>
                                                <td><span class="price-unit"><t t-esc="line.price_unit"/></span></td>
                                                <td><span class="price-subtotal"><t t-esc="line.price_subtotal"/></span></td>
                                                <td>
                                                    <button type="button" class="btn btn-primary edit-button">Edit</button> 
                                                    <button type="button" class="btn btn-primary save-button" style="display: none;">Save</button>
                                                </td>
                                                <td>
                                                    <i class="fa fa-trash delete-icon" style="color: Black; cursor: pointer;"></i>
                                                </td> 
                                                
                                            </tr>
                                        </t>
                                        <tr id="product_placeholder_row">
                                            <td colspan="5"></td>
                                        </tr>
                                    </tbody>
                                </table>
                                <!-- <button class = "btn btn-primary m-2 buys-btn" type="button" t-attf-data-unique-slot-id="{{unique_slot_id}}" >Slot Buy
                                </button> -->
                                <div class="text-right padded-container">
                                     <p><strong> Slot Total Amount: <span class="total_amount" t-esc="slot.total_amount"/></strong></p>
                                     <p><strong> Slot Original Amount: <span class="original_amount" t-esc="slot.total_amount"/></strong></p>
                                     <p><strong>Extra Amount: <span id="extra-amount"></span></strong></p>
                                </div>  
                                 
                                <div id="extra-amount-display" class="text-center p-2"></div>
                                <div id="add-products-message" class="text-center p-2"></div>
                                <div id="message_area" class="text-center p-2"></div>
                                <div class="text-center p-2">
                                    <button type="button" class="btn btn-primary btn-add-products">ADD MORE PRODUCTS</button>
                                </div>
                                
                                    <div class="products_karban_views_wrapper">
                                        <div class="kanban_view_container">
                                            <!-- Placeholder for Kanban view -->
                                        </div>
                                    </div>
                            </div>
                        </div>
                    </div>
                </form>
            </t>
        </t>
    </template>
</odoo>
<?xml version="1.0" encoding="UTF-8"?>
<templates id="template" xml:space="preserve">
    <t t-name="OrderSummary" t-inherit="point_of_sale.OrderSummary" t-inherit-mode="extension" owl="1">
        <xpath expr="//div[hasclass('summary')]//div[hasclass('line')]//div[hasclass('entry')]" position="inside">
            <div class="subentry">
                SubTotal:
                <span class="value">
                    <t t-esc="getSubTotalPrice()" />
                </span>
            </div>
            <div class="subentry">
                TOTAL MRP:
                <span class="value">
                    <t t-esc="getMrpPrice()" />
                </span>
            </div>
        </xpath>
    </t>
    <t t-name="OrderSummary" t-inherit="point_of_sale.OrderReceipt" t-inherit-mode="extension" owl="1">
        <xpath expr="//div[hasclass('pos-receipt')]//div[hasclass('pos-receipt-amount')]" position="replace">
            <div class="pos-receipt-amount">
                SUBTOTAL:
                <span t-esc="env.pos.format_currency(receipt.sub_total)" class="pos-receipt-right-align"/>
            </div><br/>
            <div class="pos-receipt-amount">
                TOTAL:
                <span t-esc="env.pos.format_currency(receipt.total_with_tax)" class="pos-receipt-right-align"/>
            </div><br/>
            <div class="pos-receipt-amount">
                TOTAL M.R.P:
                <span t-esc="env.pos.format_currency(receipt.mrp_price)" class="pos-receipt-right-align"/>
            </div><br/>
            <!-- <div class="pos-receipt-amount">
                M.R.Ps:
                <span t-esc="env.pos.format_currency((receipt.total_with_tax - receipt.total_without_tax) + receipt.total_with_tax)" class="pos-receipt-right-align"/><br/>
            </div> -->

        </xpath>
    </t>
    <t t-name="OrderLinesReceipt" t-inherit="point_of_sale.OrderLinesReceipt"  owl="1">
        <xpath expr="//t[@t-name='OrderLinesReceipt']" position="inside">
            <style>
                .pos-receipt-table {
                    width: 30%;  /* Adjusted width to fit the entire space */
                    border-collapse: collapse;
                    <!-- margin-bottom: 10px; -->
                }

                .pos-receipt-table th, .pos-receipt-table td {
                    border: 1px solid #ddd;
                    padding: 8px;
                    text-align: left;
                }

                .pos-receipt-table th {
                    background-color: #f2f2f2;
                }

                <!-- .responsive-price {
                    font-weight: bold;
                } -->

                .pos-receipt-right-align {
                    text-align: right;
                }

                .pos-receipt-left-padding {
                    padding-left: 10px;
                }

                .pos-receipt-customer-note {
                    color: #888;
                }
                @media print {
                    .pos-receipt-table {
                        width: 100% !important; /* Add !important to override existing styles */
                    }

                    .pos-receipt-right-align {
                        text-align: left !important; /* Adjust alignment for better print display */
                    }
                }
            </style>
            <div>
                <!-- Table for Products -->
                <table class="pos-receipt-table">
                    <thead>
                        <tr>
                            <th>Product</th>
                            <th>Qty</th>
                            
                            <th>Price</th>
                            <th>Discount</th>
                        </tr>
                    </thead>
                    <tbody>
                        <t t-foreach="receipt.orderlines" t-as="line" t-key="line.id">
                            <tr>
                                <td>
                                    <t t-if="isSimple(line)">
                                        <div class="responsive-price">
                                            <t t-esc="line.product_name_wrapped[0]" />
                                        </div>
                                        <WrappedProductNameLines line="line" />
                                    </t>
                                    <t t-else="">
                                        <div t-esc="line.product_name_wrapped[0]" />
                                        <WrappedProductNameLines line="line" />
                                    </t>
                                </td>
                                <td>
                                    <t t-esc="Math.round(line.quantity * Math.pow(10, env.pos.dp['Product Unit of Measure'])) / Math.pow(10, env.pos.dp['Product Unit of Measure'])"/>
                                    <t t-if="!line.is_in_unit" t-esc="line.unit_name" />
                                </td>

                                <td>
                                    <span class="price_display pos-receipt-right-align">
                                        <t t-esc="env.pos.format_currency_no_symbol(line.price_display)" />
                                    </span>
                                </td>
                                <td>
                                    <t t-if="line.discount !== 0">
                                        <t t-esc="line.discount" />%
                                    </t>
                                </td>
                            </tr>
                        </t>
                    </tbody>
                </table>
            </div>
        </xpath>
        <xpath expr="//t[@t-foreach='receipt.orderlines']" position="replace">
        </xpath> 
    </t>
</templates>
